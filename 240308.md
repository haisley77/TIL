# 

240308 TIL

# ERD 설계

- ERD 설계에 대한 DBA의 관점 (전통적인 ERD 설계 방식)
    - NULL 값, 필드 개수, 중복 데이터 때문에 일대일 관계를 맺는 것은 지양
    - DB 데이터 접근 시 조인 성능 이슈로 인한 문제
    - 일대일 관계로 맺어진 테이블에 잘못된 데이터 칼럼 값이 들어가면 문제 부분을 찾는 것이 어려워지는 것이 가장 큰 문제
    - 필드 개수 50개까지는 OK
    - JPA를 이용한 백엔드 개발 편의를 위해 엔티티 크기를 줄이려는 생각에서 일대일 관계를 억지로 만드는 것은 주의
- 단방향 참조 (1:1)
    - 주테이블과 대상테이블에서 주테이블만 대상테이블의 PK를 가지도록 설계
    - DB 엔지니어의 입장에서는 양방향을 선호
    - 객체지향적 개발을 원하는 개발자의 입장에서는 단방향을 선호
    - 적절한 MIX를 통한 협의점을 찾는 것이 중요
- 다대다 관계 → 일대다,다대일 관계
    - 일반적으로 새로운 데이터가 추가될 것을 고려해 일대다, 다대일의 확장성 있는 구조로 설계한다.
    - 하지만 오늘 설계한 ERD에서는 고정 속성을 가진 하나의 테이블로 일대일 관계를 만들었다.
    - 데이터 학습 모델에 고정된 특정 속성만을 가지는 데이터셋을 적용해야 했기 때문이다.
    - 학습데이터에 대한 전처리 및 가공 작업을 최소화하여 데이터 분석 작업에 대한 성능적 이점을 가져올 수 있었다.
    

# AWS S3

- 데이터 저장/삭제/조회가 가능한 파일 서버로, 인터넷용 스토리지이다.
- 객체는 S3에 저장된 데이터로, 파일이다.
- 버킷은 S3 내 최상위 디렉토리의 개념이다.
- keys는 버킷 내 객체의 고유 식별자로, 파일 식별자이다.
- 일반적으로 파일 업로드나 다운로드 등의 작업 시 파일이 저장된 S3내 위치를 가리키는 URL을 통해 접근한다. (퍼블릭 버킷으로 설정)
- S3 객체 별 접근 권한을 세밀하게 부여하고 싶다면? 다음 두가지 방법이 있다. (학습필요)
    - 버킷 정책 설정
    - ACL 설정
- S3 서버에 대한 업로드나 다운로드 등을 진행하기 위해서는 액세스 키(시크릿 키)를 보유하거나 S3에 설정한 IAM 사용자임이 보장되어야 한다.
- 백엔드 서버에 접근을 위한 정보를 저장해 놓고 백엔드 서버가 클라이언트로부터 받은 파일을 S3에 업로드 및 다운로드 하는 것은 보안적으로 뛰어나지만, 서버에 부하가 발생할 수 있다.
- 클라이언트에서 직접 S3에 접근해 파일 작업을 처리하는 것은 빠르고 서버에 부하를 주지 않지만, S3 접근에 필요한 중요 정보가 노출될 가능성이 높다.
- 따라서 이 2가지 방법의 적절한 타협점이 필요해보인다.
    - `Presigned URL` 방식 (학습필요)